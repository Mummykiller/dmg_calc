// Toon Transcribing Object Oriented Notation for a Graceful Chat Session Closure

@Action: Save_Session_State
  Description: A comprehensive checklist for Gemini to execute before closing a chat session. The goal is to serialize the project and conversation state to ensure a seamless continuation in the next session.

  @Step: 1 - Create_Chat_Summary
    @Instruction: "Generate a summary of the current chat session. This summary should capture the main user goals, the features implemented, and any unresolved requests. Format this information similarly to the provided `Chat` class snippet and save it to a file named `session_summary.md`."
    @Example_Format:
      ---
      [Create Time]: {current_timestamp}
      [Title]: DDO Damage Calculator - Spell Feature Implementation
      [Summary]:
      - Implemented a new Spell Calculator feature with its own UI and logic (`SpellCalculator.js`).
      - Added support for Empower, Maximize, and Intensify metamagics as spell power bonuses.
      - Updated the main `gemini.md` documentation to reflect all new features.
      - Created a `changelog.toon` to document the development process.
      ---

  @Step: 2 - Git_Synchronization
    @Instruction: "Run `git status --porcelain` to check for any uncommitted work."
    @Sub-Instruction: If_Changes_Exist
      @Instruction: "Add all new and modified files to the staging area using `git add .`"
      @Instruction: "Commit the staged files with a clear and descriptive message, for example: 'chore: Save work-in-progress at end of session'."
    @Sub-Instruction: If_No_Changes
      @Instruction: "Notify the user that there are no uncommitted changes to save."

  @Step: 3 - Create_Continuity_Instructions
    @Instruction: "Create a file named `closedchat.md`. This file should contain a clear, numbered list of instructions for the next AI agent session to pick up exactly where this one left off."
    @Content_Template_for_closedchat.md:
      "\n      # Next Session Startup Checklist\n\n      To continue from the previous session, please follow these steps:\n\n      1.  **Review Previous Session:** Read the `session_summary.md` file to get a full understanding of what was accomplished.\n      2.  **Check Project Documentation:** Review the updated `gemini.md` to understand the current state of the project's features and architecture.\n      3.  **Inspect Recent Commits:** Use `git log -n 3 --oneline` to see the last few commits and understand the most recent code changes.\n      4.  **Confirm Next Steps:** Based on the review, state your understanding of the project and ask the user for the next task.\n      "

  @Step: 4 - Configure_Next_Session_Startup
    @Instruction: "Append a persistent memory note to `..\.gemini\GEMINI.md`. This note must instruct the AI to automatically read `closedchat.md` at the beginning of the next session for this project, right after the initial `GEMINI.md` context is loaded."
    @Example_Note:
      "---
      ## Gemini Added Memories
      - The user wants me to automatically read `closedchat.md` immediately after processing `GEMINI.md` at the start of every session for this project.
      ---"

  @Step: 5 - Final_Confirmation
    @Instruction: "Inform the user that the session state has been successfully saved and that you are ready for the next command or for the chat to be closed."